<%- include('../partials/header') %> <%- include('../partials/menu') %>

<div class="container">
  <br />
  <br />

  <!-- heading -->
  <h3 class="text-center">Movie reviews</h3>
  <div class="container" style="margin-top: 20px; margin-bottom: 30px">
    <form class="row" action="/reviews" method="GET">

      <!-- search bar -->
      <div class="col-sm-10">
        <input
          class="form-control"
          type="text"
          id="movie_title"
          name="movie_title"
          placeholder="Enter movie title"
          aria-label="Search"
        />
      </div>
      <div class="col-sm-2">
        <button
          id="filter_button"
          class="btn btn-primary btn-block"
          type="submit"
        >
          Filter
        </button>
      </div>
    </form>
  </div>
  <br />

  <!-- reviews table -->
  <table class="table table-bordered" id="reviews_table">
    <tr>
      <th class="align-bottom" rowspan="2">Movie</th>
      <th class="align-bottom" rowspan="2">Review</th>
      <th class="align-bottom" rowspan="2">Review Date</th>
    </tr>
    <tr></tr>

    <% 
    if (data) { 
      var rows ='' ; 
      data.forEach(function(item) { 
        rows += '<tr>';
        rows += '<td>' + item.movie_name + '</td>'; 
        rows += '<td>' + item.movie_review + '</td>';
        rows += '<td>' + item.review_date + '</td>';
        rows += '</tr>';
      }); %>
      <%- rows %>
    <% } %>


  </table>
</div>

<%- include('../partials/footer') %>
